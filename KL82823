local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/MlFrvWM/BBLT81/main/BL81827TC", true))()

local window = library:AddWindow("Farm Kill", {
    main_color = Color3.fromRGB(0, 0, 0),
    min_size = Vector2.new(685, 550),
    can_resize = false,
})

local function setFontRecursive(guiObject, font)
    for _, obj in pairs(guiObject:GetDescendants()) do
        if obj:IsA("TextLabel") or obj:IsA("TextButton") or obj:IsA("TextBox") then
            obj.Font = font
        end
    end
end

spawn(function()
    repeat wait() until window.gui
    setFontRecursive(window.gui, Enum.Font.SourceSansBold)
end)

local tabFarmKill = window:AddTab("Kill")

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local Lighting = game:GetService("Lighting")
local RunService = game:GetService("RunService")
local StarterGui = game:GetService("StarterGui")

local placeId = game.PlaceId
local excludedNames = {
    ["U3RT_SOVIETxKILLA"] = false,
    ["U3RT_KILLAxSOVIET"] = false,
}
local ServerHopCooldown = false

local function find18PlayerServer()
    local cursor = nil
    repeat
        local url = "https://games.roblox.com/v1/games/" .. placeId .. "/servers/Public?sortOrder=Desc&limit=100"
        if cursor then url = url .. "&cursor=" .. cursor end

        local success, result = pcall(function()
            return HttpService:JSONDecode(game:HttpGet(url))
        end)

        if success and result and result.data then
            for _, server in ipairs(result.data) do
                if server.playing == 18 and server.maxPlayers == 20 and server.id ~= game.JobId then
                    return server.id
                end
            end
            cursor = result.nextPageCursor
        else
            break
        end
    until not cursor
end

local function hopToServer()
    if ServerHopCooldown then return end
    ServerHopCooldown = true
    local serverId = find18PlayerServer()
    if serverId then
        TeleportService:TeleportToPlaceInstance(placeId, serverId, LocalPlayer)
    else
        task.delay(5, function() ServerHopCooldown = false end)
    end
end

local function setupDiedListener(character)
    local hum = character:FindFirstChildOfClass("Humanoid")
    if hum then
        hum.Died:Connect(hopToServer)
    end
end

if LocalPlayer.Character then setupDiedListener(LocalPlayer.Character) end
LocalPlayer.CharacterAdded:Connect(setupDiedListener)

RunService.Heartbeat:Connect(function()
    local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if hum and hum.Health < hum.MaxHealth then
        hum.Health = hum.MaxHealth
    end
end)

task.spawn(function()
    while true do
        task.wait()
        local char = LocalPlayer.Character
        local Backpack = LocalPlayer:FindFirstChild("Backpack")
        local humanoid = char and char:FindFirstChildOfClass("Humanoid")
        local tool = (char and char:FindFirstChild("Punch")) or (Backpack and Backpack:FindFirstChild("Punch"))

        if humanoid and tool then
            if tool.Parent ~= char then
                humanoid:EquipTool(tool)
                task.wait(0.05)
            end
            pcall(function()
                tool:Activate()
            end)
        end
    end
end)

task.spawn(function()
    while true do
        task.wait(1)
        local myChar = LocalPlayer.Character
        local myDurability = LocalPlayer:FindFirstChild("Durability") and LocalPlayer.Durability.Value
        local root = myChar and myChar:FindFirstChild("HumanoidRootPart")
        if not (myDurability and root) then continue end

        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and not excludedNames[player.DisplayName] then
                local targetChar = player.Character
                local stats = player:FindFirstChild("leaderstats")
                local strength = stats and stats:FindFirstChild("Strength") and stats.Strength.Value
                local targetRoot = targetChar and targetChar:FindFirstChild("HumanoidRootPart")
                if strength and targetRoot and strength < myDurability * 6.5 then
                    targetRoot.CFrame = root.CFrame * CFrame.new(math.random(-5,5), 0, math.random(-5,5))
                end
            end
        end
    end
end)

RunService.Heartbeat:Connect(function()
    local root = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if root then
        root.CFrame = root.CFrame * CFrame.Angles(0, math.rad(5), 0)
    end
end)

local lastPos
_G.lockPosition = true
RunService.Heartbeat:Connect(function()
    local root = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if _G.lockPosition and root then
        lastPos = lastPos or root.Position
        root.Velocity = Vector3.zero
        root.RotVelocity = Vector3.zero
        root.CFrame = CFrame.new(lastPos)
    end
end)

task.spawn(function()
    local function clearVisuals(obj)
        for _, v in ipairs(obj:GetDescendants()) do
            if v:IsA("Decal") or v:IsA("Texture") or v:IsA("ParticleEmitter")
            or v:IsA("Fire") or v:IsA("Smoke") or v:IsA("Sparkles")
            or v:IsA("Trail") or v:IsA("Beam") or v:IsA("ShirtGraphic")
            or v:IsA("Accessory") or v:IsA("Clothing") or v:IsA("ForceField") then
                pcall(function() v:Destroy() end)
            elseif v:IsA("BasePart") then
                v.Material = Enum.Material.SmoothPlastic
                v.Reflectance = 0
                v.CastShadow = false
            elseif v:IsA("Sound") then
                v.Volume = 0
            end
        end
    end

    Lighting.GlobalShadows = false
    Lighting.FogEnd = 1e9
    Lighting.Brightness = 0
    Lighting.ClockTime = 14
    for _, v in pairs(Lighting:GetDescendants()) do
        if v:IsA("PostEffect") then v.Enabled = false end
    end

    clearVisuals(workspace)
    for _, p in ipairs(Players:GetPlayers()) do
        if p.Character then clearVisuals(p.Character) end
    end

    Players.PlayerAdded:Connect(function(p)
        p.CharacterAdded:Connect(function(c)
            task.wait(1)
            clearVisuals(c)
        end)
    end)

    workspace.DescendantAdded:Connect(function(obj)
        task.delay(0.3, function()
            if obj:IsDescendantOf(workspace) then
                clearVisuals(obj)
            end
        end)
    end)

    for _, gui in ipairs(Enum.CoreGuiType:GetEnumItems()) do
        pcall(function() StarterGui:SetCoreGuiEnabled(gui, false) end)
    end
end)

task.spawn(function()
    while true do
        task.wait(2)
        for _, p in ipairs(Players:GetPlayers()) do
            if p ~= LocalPlayer and excludedNames[p.DisplayName] == false then
                hopToServer()
                return
            end
        end
    end
end)

task.delay(45, hopToServer)
